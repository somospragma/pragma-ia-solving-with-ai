# Est√°ndar para los Instructions üìê

## Introducci√≥n

Este documento define un est√°ndar para estructurar archivos de instrucciones para agentes de IA. La estructura propuesta es transversal para equipos de Frontend, Backend y Mobile, facilitando la implementaci√≥n consistente de buenas pr√°cticas de ingenier√≠a y permitiendo la "hidrataci√≥n" espec√≠fica seg√∫n el contexto tecnol√≥gico.

### Implementaci√≥n Pr√°ctica

La plantilla debe "hidratarse" con:

1. **Reglas espec√≠ficas** del Chapter ‚Üí Tecnolog√≠a ‚Üí Proyecto
2. **M√≠nimos de desarrollo** implementados

### Evoluci√≥n Continua

Este est√°ndar debe evolucionar basado en:

- Cambios en las capacidades de los agentes de IA
- Retroalimentaci√≥n pr√°ctica de los equipos de desarrollo
- Nuevas investigaciones sobre optimizaci√≥n de contexto para LLMs

## Limitaciones T√©cnicas para Agentes de IA

### Ventanas de Contexto: Teor√≠a vs Realidad Pr√°ctica

Los agentes de IA comerciales implementan limitaciones de contexto significativamente menores a las capacidades t√©cnicas de los modelos subyacentes por razones de costo y rendimiento.

**L√≠mites Te√≥ricos vs Pr√°cticos (Septiembre 2025):**

**Claude Sonnet 4** [(Anthropic Documentation, 2025)](https://docs.anthropic.com/en/docs/about-claude/models):

- **Te√≥rico**: 200K tokens de contexto, 1M tokens disponible en beta
- **Pr√°ctico en agentes**: ~128K tokens (*reportado emp√≠ricamente - no verificado oficialmente*)
- **Uso emp√≠rico**: ~64K tokens (*reportado emp√≠ricamente - no verificado oficialmente*)

**GitHub Copilot**:

- L√≠mites no documentados p√∫blicamente, implementaci√≥n optimizada para costos

**Consideraciones de Implementaci√≥n:**

- **Restricciones por costos**: Los proveedores de agentes limitan el contexto para mantener viabilidad econ√≥mica
- **Optimizaci√≥n de rendimiento**: Contextos menores mejoran tiempo de respuesta y estabilidad
- **Conversi√≥n tokens-caracteres**: Aproximadamente 1 token ‚âà 0.75 palabras en espa√±ol
- **L√≠mites espec√≠ficos para archivos de reglas**: Windsurf documenta un l√≠mite de 12,000 caracteres por archivo de reglas [(Windsurf Documentation, 2025)](https://docs.windsurf.com/windsurf/cascade/memories)
- **Competencia por contexto**: Los archivos de instrucciones compiten por espacio con c√≥digo fuente, prompts del usuario y otros elementos

### Fen√≥menos de Rendimiento Documentados

**Efecto "Lost in the Middle"** [(Liu et al., 2023)](https://arxiv.org/abs/2307.03172):

- La informaci√≥n al inicio y final de documentos largos recibe mayor atenci√≥n
- Degradaci√≥n de rendimiento en el contenido medio de contextos muy largos
- **Aplicaci√≥n pr√°ctica**: Colocar informaci√≥n cr√≠tica al inicio y final de las instrucciones

**Optimizaci√≥n de Memoria** [(Brown et al., 2020)](https://arxiv.org/abs/2005.14165):

- Los modelos retienen mejor conceptos definidos temprano y referenciados consistentemente
- La repetici√≥n estrat√©gica de conceptos clave mejora la retenci√≥n

## Mejores Pr√°cticas de Ingenier√≠a de Contexto

### Principios Fundamentales

#### Conexi√≥n L√≥gica: Limitaciones ‚Üí Soluciones

Las limitaciones identificadas llevan directamente a estas estrategias:

1. **Por l√≠mites de contexto**: Usar estructura modular para proyectos complejos
2. **Por efecto de posici√≥n**: Colocar reglas cr√≠ticas al inicio y recordatorios al final
3. **Por optimizaci√≥n de memoria**: Repetir conceptos clave y usar referencias consistentes

### Estructura √ìptima de Archivos

#### Enfoque Unificado vs. Modular

- **Archivo √∫nico**: Para proyectos con <12.000 caracteres de instrucciones
- **Estructura modular**: Para casos complejos que requieren >12.000 caracteres de instrucciones

```plaintext
/instructions/
  instructions.md            # √≠ndice principal con frontmatter y enlaces
  01-context.md              # Secci√≥n 1: General Context
  02-code-guidelines.md      # Secci√≥n 2: Code Guidelines & Standards
  03-technology.md           # Secci√≥n 3: Technology-Specific Guidelines
  04-quality.md              # Secci√≥n 4: Quality & Engineering Excellence
  05-process.md              # Secci√≥n 5: Process Requirements
  06-operations.md           # Secci√≥n 6: Observability & Operations
  99-agent-notes.md          # notas espec√≠ficas para el agente
```

### Sistema de Marcado para Secciones Espec√≠ficas

El sistema de marcado propuesto permite identificar claramente qu√© secciones son espec√≠ficas de ciertos contextos tecnol√≥gicos:

```plaintext
üîµ Frontend-specific
üü¢ Backend-specific
üü° Mobile-specific
‚ö™ Optional for all implementations
```

> Este marcado √∫nicamente se muestra con fines explicativos en el template  y no debe quedar en el producto final.

## Recomendaciones para Implementaci√≥n

### Metodolog√≠a de Validaci√≥n

1. **Pruebas de efectividad emp√≠ricas**: Evaluar peri√≥dicamente la comprensi√≥n del agente sobre diferentes secciones
2. **Iteraci√≥n basada en resultados**: Ajustar estructura seg√∫n performance observada
3. **Hidrataci√≥n contextual**: Al adaptar la plantilla para un equipo espec√≠fico, mantener la estructura fundamental pero adaptar el contenido

### M√©tricas de √âxito

- Reducci√≥n en aclaraciones necesarias del agente
- Mejora en la calidad del c√≥digo generado
- Disminuci√≥n en iteraciones de refinamiento
- Consistencia en aplicaci√≥n de est√°ndares

## Estructura Unificada Sugerida

[Estructura Unificada Markdown](./instructions-template.md)

## Estructura Modularizada Sugerida

[Estructura Modularizada Markdown](./instructions-orchestrator-template.md)

**Implementaci√≥n Modular:**

1. Cada archivo modular DEBE seguir internamente la misma estructura de secciones definida en la Estructura Unificada
2. Mantener t√≠tulos de secciones principales consistentes
3. Trasladar el contenido a su archivo correspondiente seg√∫n funcionalidad

> üí° **Optimizaci√≥n**: Se sugiere que cada archivo modular debe respetar el l√≠mite de 12,000 caracteres seg√∫n la documentaci√≥n de Windsurf

## Conclusi√≥n

Si para un proyecto bastan instrucciones b√°sicas, se pueden agrupar todas en un archivo como lo muestra la Estructura Unificada; pero si se requiere de un listado de reglas complejo y extenso se recomienda optar por la Estructura Modularizada (con Orquestador).

Ambas propuestas se limitan a sugerir un Template de alto nivel que marca la estructura que debe seguir el `Instrucctions.md` con el fin de optimizarse para Agentes. Adicionalmente, se debe ‚Äúhidratar‚Äù esta plantilla con las reglas espec√≠ficas (contenido) pertinentes al **Chapter ‚Üí Tecnolog√≠a ‚Üí Proyecto** y asegurarse de implementar los **m√≠nimos de desarrollo**; por ejemplo, la sub-secci√≥n de Testing deber√≠a incluir reglas como *‚Äúutilizar TDD‚Äù*, *‚Äúseguir el patr√≥n AAA‚Äù* y *‚Äúseguir el principio FIRST‚Äù*.
