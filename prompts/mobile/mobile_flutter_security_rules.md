# Evaluador de Reglas y Buenas Prácticas de seguridad para Flutter\n\n

## Paso 0: Obtención de Reglas\n- Usa la herramienta getPragmaResources para obtener los recursos: 'm1-platform.md', 'm2-storage.md', 'm3-communication.md', 'm4-authentication.md', 'm5-cryptography.md', 'm6-authorization.md', 'm7-code-quality.md', 'm8-tampering.md', 'm9-reverse-engineering.md', 'm10-extraneous.md' desde el servidor MCP Pragma.\n- Obten las reglas de seguridad en la carpeta de este proyecto: rules/security/m*.\n- Si la obtención es exitosa, utiliza el contenido de ese recurso como base para la evaluación.\n- Si la obtención falla, notifica al usuario y detén el proceso.\n\n

## PASO 1 — Generar PLAN DE EJECUCIÓN\n- Siempre genera un plan inicialmente antes de realizar cualquier otra acción.\n- Genera un PLAN con estas características:\n\nA. El plan debe incluir 10 pasos para analizar el proyecto siguiendo los siguientes rulesets en orden:\n- m1-platform.md\n- m2-storage.md\n- m3-communication.md\n- m4-authentication.md\n- m5-cryptography.md\n- m6-authorization.md\n- m7-code-quality.md\n- m8-tampering.md\n- m9-reverse-engineering.md\n- m10-extraneous.md\n\nB. Para cada paso del plan incluye:\n- step o número del paso actual (1 al 10)\n- ruleset_name (ej: "M3 - Comunicación Insegura")\n- file_name (ej: "m3-communication.md")\n- ámbitos de análisis (ej: lib/**, android/**, ios/**)\n- qué verificará ese ruleset en forma resumida\n- severidades esperadas (CRITICAL/HIGH/MEDIUM/LOW)\n- dependencias o prerequisitos si existen\n\nC. El agente debe **detenerse después de generar el plan** y esperar instrucciones del usuario para comenzar el analizar con todos los ruleset:\n- “Empezar”\n- “Cancelar”\n\n

## Paso 2: Evaluación del Repositorio\n- Analiza el repositorio actual aplicando cada una de las reglas y buenas prácticas extraídas del contenido real de cada .md de rules/security/.\n- Para cada criterio, verifica el cumplimiento en el código y documentación del repositorio.\n\n

## Paso 3: Generación de Reporte\n- Si no existe, genera un reporte en formato Markdown en la carpeta 'reports', nombrado 'flutter_security_rules_report.md'.\n- Si existe, agrega los resultados adicionales en el mismo.\n- El reporte debe incluir:\n- Una tabla visual con los criterios evaluados y su estado (✔️ Cumple / ❌ No cumple / ⚠️ Parcial / N/A).\n- Recomendaciones específicas para cada criterio no cumplido.\n- Un resumen ejecutivo y pasos sugeridos para mejorar el cumplimiento.\n\n### Ejemplo de tabla:\n| Criterio | Estado | Recomendación |\n|----------|--------|---------------|\n| Estructura del Proyecto | ✔️ | - |\n| Gestión de Estado | ❌ | Implementar Provider o Riverpod |\n| Rendimiento | ⚠️ | Optimizar imágenes y assets |\n\n

## Paso 4: Notificación\n- Notifica al desarrollador la ubicación del reporte y los principales hallazgos.\n\n## Instrucciones\n- No omitas ningún criterio del recurso obtenido.\n- Si algún criterio no aplica, indícalo como 'N/A'.\n- No agregues al contexto cualquier reporte previo existente, siempre aplica todo de nuevo.\n- Siempre genera un nuevo reporte completo, sin importar si ya existe uno previo.\n- El reporte debe ser claro, visual y accionable para el desarrollador.
